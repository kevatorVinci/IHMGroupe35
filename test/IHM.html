<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan du projet - Vinci Arena</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* --- Styles globaux --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Roboto', sans-serif; background-color: #f1f5f9; color: #334155; padding: 40px; padding-bottom: 80px; }
        .container { max-width: 1000px; margin: 0 auto; }
        
        .header { text-align: center; margin-bottom: 40px; }
        .header h1 { font-size: 32px; color: #0f172a; margin-bottom: 10px; }
        .header p { color: #64748b; font-size: 16px; margin-bottom: 25px; }

        .category-block { background: #fff; border-radius: 12px; padding: 25px; margin-bottom: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border-left: 5px solid #2563eb; }
        .category-title { font-size: 20px; font-weight: 700; color: #0f172a; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        
        .ihm-list { list-style: none; display: flex; flex-direction: column; gap: 10px; }
        .ihm-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #f8fafc; border-radius: 6px; border: 1px solid #e2e8f0; }
        .ihm-item a { text-decoration: none; color: #334155; font-weight: 500; flex-grow: 1; display: flex; align-items: center; gap: 10px; }
        .ihm-item a:hover { color: #2563eb; }
        
        /* --- BADGES CLIQUABLES --- */
        .badge { 
            padding: 6px 10px; 
            border-radius: 4px; 
            font-size: 11px; 
            font-weight: 700; 
            text-transform: uppercase; 
            cursor: pointer;
            user-select: none;
            transition: 0.2s;
            min-width: 75px;
            text-align: center;
        }
        .badge:hover { filter: brightness(0.95); transform: scale(1.05); }
        .badge:active { transform: scale(0.95); }

        .badge-done { background: #dcfce7; color: #166534; border: 1px solid #bbf7d0; }
        .badge-todo { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }

        /* --- BOUTON DE SAUVEGARDE FLOTTANT (En bas √† droite) --- */
        #save-btn-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: none; /* Cach√© par d√©faut */
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        .btn-save {
            background-color: #2563eb;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4);
            display: flex;
            align-items: center;
            gap: 10px;
            transition: transform 0.2s, background-color 0.2s;
        }

        .btn-save:hover {
            background-color: #1d4ed8;
            transform: translateY(-2px);
        }

        /* --- BOUTON IMPORTER (En haut, bien visible) --- */
        .btn-import {
            background-color: #10b981; /* Vert √âmeraude */
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            text-decoration: none;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-import:hover {
            background-color: #059669;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        @keyframes slideIn {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>üéÆ Cartographie du Projet : Vinci Arena</h1>
        <p>Index des 37 Interfaces Homme-Machine (IHM)</p>
        
        <button class="btn-import" onclick="importerDonnees()">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>
            Recharger les statuts (JSON)
        </button>
    </div>

    <div class="category-block">
        <h2 class="category-title">üè† 1. Accueil et navigation(Kevin)</h2>
        <ul class="ihm-list">
            <li class="ihm-item"><a href="accueil.html"><span>IHM 1</span> Page d‚Äôaccueil (visiteur + connect√©)</a> <span class="badge badge-done" onclick="toggleStatus(this)">Fait</span></li>
            <li class="ihm-item"><a href="connexion.html"><span>IHM 2</span> Page de connexion</a> <span class="badge badge-done" onclick="toggleStatus(this)">Fait</span></li>
            <li class="ihm-item"><a href="inscription.html"><span>IHM 3</span> Page d‚Äôinscription</a> <span class="badge badge-done" onclick="toggleStatus(this)">Fait</span></li>
            <li class="ihm-item"><a href="equipes_publique.html"><span>IHM 4</span> Page ‚Äú√©quipes / membres‚Äù publique</a> <span class="badge badge-done" onclick="toggleStatus(this)">Fait</span></li>
        </ul>
    </div>

    <div class="category-block">
        <h2 class="category-title">üë§ 2. Espace membre / profil(Kevin)</h2>
        <ul class="ihm-list">
            <li class="ihm-item"><a href="tableauDeborEquipe.html"><span>IHM 5</span> Tableau de bord membre (avec √©quipe)</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="tableauDeborSansEquipe.html"><span>IHM 6</span> Tableau de bord membre (sans √©quipe)</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="profil.html"><span>IHM 7</span> Page de profil (vue)</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="/test/edtiProfil.html"><span>IHM 8</span> Page d‚Äô√©dition de profil</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="/test/disponibilite.html"><span>IHM 9</span> Gestion des indisponibilit√©s</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="/test/monActivite.html"><span>IHM 10</span> Page ‚ÄúMon activit√©‚Äù</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="detailsmatch_membre.html"><span>IHM 35</span> D√©tail d‚Äôun match ‚Äì vue publique (Partie 7)</a> <span class="badge badge-done" onclick="toggleStatus(this)">Fait</span></li>


        </ul>
    </div>

    <div class="category-block">
        <h2 class="category-title">üõ°Ô∏è 3. √âquipes / Teams(?)</h2>
        <ul class="ihm-list">
            <li class="ihm-item"><a href="equipes.html"><span>IHM 11</span> Page ‚ÄúMon √©quipe‚Äù ‚Äì vue responsable</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="equipes.html"><span>IHM 12</span> Page ‚ÄúMon √©quipe‚Äù ‚Äì vue simple membre</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="equipes_publique.html"><span>IHM 13</span> Page ‚ÄúToutes les √©quipes‚Äù</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="creer_equipe.html"><span>IHM 14</span> √âcran ‚ÄúCr√©er une team‚Äù</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="gestion_adhesions.html"><span>IHM 15</span> √âcran ‚ÄúDemandes d‚Äôadh√©sion √† ma team‚Äù</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="#"><span>IHM 16</span> √âcran ‚ÄúRejoindre une √©quipe‚Äù</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="#"><span>IHM 17</span> Message ‚ÄúVous √™tes d√©j√† dans une √©quipe‚Äù</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
        </ul>
    </div>

    <div class="category-block">
        <h2 class="category-title">üèÜ 4. Tournois et matchs (public / membre)(?)</h2>
        <ul class="ihm-list">
            <li class="ihm-item"><a href="liste_tournois.html"><span>IHM 18</span> Liste des tournois (recherche avanc√©e)</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="detailsTournoi.html"><span>IHM 20a</span> D√©tail d‚Äôun tournoi termin√©</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="detailsTournoi.html"><span>IHM 20b</span> D√©tail d‚Äôun tournoi √† venir</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="detailsTournoi.html"><span>IHM 20c</span> D√©tail d‚Äôun tournoi en cours </a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
        </ul>
    </div>

    <div class="category-block">
        <h2 class="category-title">‚öôÔ∏è 5. IHM administrateur(Hakim)</h2>
        <ul class="ihm-list">
            <li class="ihm-item"><a href="gestionTournoiAdmin.html"><span>IHM 21</span> Gestion tournoi</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="gestionAdmin.html"><span>IHM 22</span> Gestion des administrateurs</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="creer_tournoi.html"><span>IHM 23</span> Cr√©er un tournoi</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="modifier_tournoi.html"><span>IHM 24</span> Modifier un tournoi</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="detail_tournoi_admin.html"><span>IHM 25</span> detail du tounoi vu admin</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="gestion_inscriptions.html"><span>IHM 26</span> Inscriptions des teams √† un tournoi</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="generation_planning.html"><span>IHM 27</span> G√©n√©ration du planning</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="edition_planning.html"><span>IHM 28</span> √âdition manuelle du planning</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="detail_match.html"><span>IHM 29</span> Saisie du r√©sultat d‚Äôun match</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
        </ul>
    </div>

    <div class="category-block">
        <h2 class="category-title">üìã 6. IHM responsables de team pour les matchs(?)</h2>
        <ul class="ihm-list">
            <li class="ihm-item"><a href="matchs_tournoi.html"><span>IHM 30</span> Liste des matchs de ma team</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="selection_joueurs.html"><span>IHM 31</span> S√©lection des joueurs pour un match (4/4)</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="detail_match.html"><span>IHM 32</span> D√©tail d‚Äôun match ‚Äì vue responsable</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="detail_match.html"><span>IHM 33</span> Confirmer / contester un r√©sultat</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
        </ul>
    </div>

    <div class="category-block">
        <h2 class="category-title">üìä 7 & 8. R√©sultats & Notifications(?)</h2>
        <ul class="ihm-list">
            <li class="ihm-item"><a href="resultats_matchs.html"><span>IHM 34</span> Page ‚ÄúR√©sultats des matchs‚Äù (Partie 7)</a> <span class="badge badge-done" onclick="toggleStatus(this)">Fait</span></li>
            <li class="ihm-item"><a href="#"><span>IHM 36</span> Centre de notifications (Partie 8)</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
            <li class="ihm-item"><a href="#"><span>IHM 37</span> Indicateur de notifications (Header)</a> <span class="badge badge-todo" onclick="toggleStatus(this)">√Ä faire</span></li>
        </ul>
    </div>

</div>

<div id="save-btn-container">
    <button class="btn-save" onclick="exporterDonnees()">
        üíæ Sauvegarder les changements
    </button>
</div>

<script>
    const STORAGE_KEY = 'ihm_statuts';
    let hasUnsavedChanges = false;
    
    // Charger les statuts au d√©marrage
    document.addEventListener('DOMContentLoaded', function() {
        chargerStatuts();
    });

    function toggleStatus(badge) {
        const ihmItem = badge.closest('.ihm-item');
        const ihmName = ihmItem.querySelector('span').innerText;
        
        // Basculer l'√©tat
        if (badge.classList.contains('badge-todo')) {
            badge.classList.remove('badge-todo');
            badge.classList.add('badge-done');
            badge.innerText = 'Fait';
        } else {
            badge.classList.remove('badge-done');
            badge.classList.add('badge-todo');
            badge.innerText = '√Ä faire';
        }
        
        // Afficher le bouton de sauvegarde
        hasUnsavedChanges = true;
        document.getElementById('save-btn-container').style.display = 'block';
    }

    // Sauvegarde et export JSON
    function exporterDonnees() {
        const statuts = {};
        document.querySelectorAll('.ihm-item').forEach(item => {
            const ihmName = item.querySelector('span').innerText;
            const badge = item.querySelector('.badge');
            statuts[ihmName] = badge.classList.contains('badge-done') ? 'fait' : 'todo';
        });
        
        const data = {
            lastUpdate: new Date().toISOString(),
            statuts: statuts
        };
        
        // Sauvegarde locale
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));

        // Cr√©er le fichier JSON
        const jsonString = JSON.stringify(data, null, 4);
        const blob = new Blob([jsonString], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'ihm_status.json';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        // Masquer le bouton apr√®s sauvegarde
        document.getElementById('save-btn-container').style.display = 'none';
        hasUnsavedChanges = false;
        
        alert('‚úÖ Statuts sauvegard√©s et fichier JSON t√©l√©charg√© !');
    }

    function chargerStatuts() {
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
            appliquerDonnees(JSON.parse(saved));
        }
    }

    function appliquerDonnees(data) {
        document.querySelectorAll('.ihm-item').forEach(item => {
            const ihmName = item.querySelector('span').innerText;
            const badge = item.querySelector('.badge');
            
            if (data.statuts && data.statuts[ihmName]) {
                if (data.statuts[ihmName] === 'fait') {
                    badge.classList.remove('badge-todo');
                    badge.classList.add('badge-done');
                    badge.innerText = 'Fait';
                } else {
                    badge.classList.remove('badge-done');
                    badge.classList.add('badge-todo');
                    badge.innerText = '√Ä faire';
                }
            }
        });
    }

    function importerDonnees() {
        fetch('data/ihm_status.json')
            .then(response => response.json())
            .then(data => {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
                appliquerDonnees(data);
                alert('‚úÖ Statuts recharg√©s depuis le fichier JSON !');
            })
            .catch(err => {
                alert('‚ö†Ô∏è Impossible de charger data/ihm_status.json. V√©rifiez le chemin.');
            });
    }
</script>

</body>
</html>